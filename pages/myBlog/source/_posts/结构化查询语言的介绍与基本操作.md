---
title: 结构化查询语言的介绍与基本操作
author: Lemon
top: false
cover: false
toc: true
mathjax: true
summary: 结构化查询语言的分类和基本操作，介绍数据库的可视化工具
tags:
  - 数据库
  - MySQL
categories:
  - MySQL
abbrlink: 7fc1a07b
reprintPolicy: cc_by
date: 2022-01-25 19:13:19
coverImg:
img:
password:
---

## 一、结构化查询语言的分类

|                    名称                     |                     解释                     |             命令              |
| :-----------------------------------------: | :------------------------------------------: | :---------------------------: |
| [DDL](/posts/63ad7bb4.html)（数据定义语言） |    定义和管理数据对象，如数据库、数据表等    |   `create`、`drop`、`alter`   |
| [DML](/posts/b26fc0fd.html)（数据操作语言） |       用于操作数据库对象中所包含的数据       | `insert`、`update`、`delete`  |
| [DQL](/posts/54189da0.html)（数据查询语言） |              用于查询数据库数据              |           `select`            |
| [DCL](/posts/2ceced73.html)（数据控制语言） | 用于管理数据库的语言，包括管理权限及数据更改 | `grant`、`commit`、`rollback` |

> 补充几个关于数据库的操作

- 创建数据库：`create database [if not exists] 数据库名;`
- 删除数据库：`drop database [if exists] 数据库名;`
- 查看数据库：`show databases;`
- 使用数据库：`use 数据库名;`

## 二、可视化工具介绍

这里要介绍的可视化工具是 `SQLyog`.

![SQLyog](https://s2.loli.net/2022/01/27/jMOcvurEo64t9ZW.png)

特点：简洁，易用，图形化。

> `IntelliJ IDEA` 也可以连接到数据。

![IntelliJ IDEA](https://s2.loli.net/2022/01/27/3eJaSbnhpUBR6PT.png)

![IntelliJ IDEA](https://s2.loli.net/2022/01/27/YK96yIPZUbldhSp.png)

![IntelliJ IDEA](https://s2.loli.net/2022/01/27/QiL8T9SbaFnIoCs.png)

![IntelliJ IDEA](https://s2.loli.net/2022/01/27/pqsLMcNriZjgVaI.png)

## 三、创建数据表

属于 `DDL` 的一种，语法：

```mysql
create table [if not exists] `表名` {
	'字段名1' 列类型 [属性][索引][注释],
    '字段名2' 列类型 [属性][索引][注释],
    ...
    '字段名n' 列类型 [属性][索引][注释]
}[表类型][表字符集][注释];
```

> 反引号用于区分 `MySQL` 关键字和普通字符。属性又称约束。

## 四、数据值和列类型

列类型：规定数据库中该列存放的数据类型。

### 4.1 数值类型

|      类型      |        说明        |                           取值范围                           | 存储要求 |
| :------------: | :----------------: | :----------------------------------------------------------: | :------: |
| **`tinyint`**  |   非常小的数据‘    |   有符号值：$-2^7 \sim 2^7-1$<br/>无符号值：$0 \sim 2^8-1$   |  1字节   |
| **`smallint`** |     较小的数据     | 有符号值：$-2^{15} \sim 2^{15}-1$<br/>无符号值：$0 \sim 2^{16}-1$ |  2字节   |
|  `mediumint`   |   中等大小的数据   | 有符号值：$-2^{23} \sim 2^{23}-1$<br/>无符号值：$0 \sim 2^{24}-1$ |  3字节   |
|   **`int`**    |      标准整数      | 有符号值：$-2^{31} \sim 2^{31}-1$<br/>无符号值：$0 \sim 2^{32}-1$ |  4字节   |
|    `bigint`    |     较大的整数     | 有符号值：$-2^{63} \sim 2^{63}-1$<br/>无符号值：$0 \sim 2^{64}-1$ |  8字节   |
|    `float`     |    单精度浮点数    |                  $\pm 1.1752351\text{e}-38$                  |  4字节   |
|  **`double`**  |    双精度浮点数    |             $\pm2.2250738585072014\text{3}-308$              |  8字节   |
|   `decimal`    | 字符串形式的浮点数 |                   $\text {decicmal}(m,d)$                    |          |

### 4.2 字符串类型

|        类型        |                           说明                           |    最大长度     |
| :----------------: | :------------------------------------------------------: | :-------------: |
|  **`char[(M)]`**   | 固定长度字符串，检索快但费空间，$0 \le \text{M} \le 255$ |     M 字符      |
| **`varchar[(M)]`** |        可变长度字符串，$0 \le \text{M} \le 65535$        |     变长度      |
|     `tinytext`     |                        微型文本串                        |  $2^8-1$ 字节   |
|     **`text`**     |                          文本串                          | $x^{16}-1$ 字节 |

### 4.3 日期和时间型数值类型

|      类型      |               说明                |                 取值范围                  |
| :------------: | :-------------------------------: | :---------------------------------------: |
|     `DATE`     |      `YYYY-MM-DD`，日期格式       |         `1000-01-01`~`9999~12-31`         |
|     `TIME`     |       `hh:mm:ss`，时间格式        |          `-838:59:59~838:59:59`           |
| **`DATETIME`** |        `YY-MM-DD hh:mm:ss`        | `1000-01-01 00:00:00~9990-12-31 23:59:59` |
|  `TIMESTAMP`   | `YYYYMMDDhhmmss` 格式表示的时间戳 |    `197010101000000~2037年的某个时刻`     |
|     `YEAR`     |        `YYYY` 格式的年份值        |                `1901~2155`                |

### 4.4 `NULL` 值

- 理解为“没有值”或“未知值”。
- 不要用 `NULL` 值做算术运算，结果仍为 `NULL`.

## 五、数据字段属性

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <table border="1px">
        <tr align="center">
            <td><b>属性</b></td>
            <td><b>说明</b></td>
        </tr>
        <tr>
            <td><code>UnSigned</code></td>
            <td>
                <ul>
                    <li>无符号的</li>
                    <li>声明该数据列不允许负数</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td><code>ZEROFILL</code></td>
            <td>
                <ul>
                    <li>0 填充的</li>
                    <li>不足位数的用 0 来填充，如 <code>int(3,5)</code>为 005</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td><code>Auto_InCrement</code></td>
            <td>
                <ul>
                    <li>自动增长的，每添加一条数据，自动在上一个记录数上加 1（默认）</li>
                    <li>通常用于设置主键，且为整数类型</li>
                    <li>
                        可定义起始值和步长<br/>
                        <ul>
                            <li>当前表设置步长（<code>AUTO_INCREMENT=100</code>）：只影响当前表</li>
                            <li><code>SET @@auto_increment_increment=5;</code>：影响所有使用自增的表（全局）</li>
                        </ul>
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td><code>NULL</code> 和 <code>NOT NULL</code></td>
            <td>
                <ul>
                    <li>默认为<code>NULL</code>，即没有插入该列的数值</li>
                    <li>如果设置为<code>NOT NULL</code>，则该列必须有值</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td><code>DEFAULT</code></td>
            <td>
                <ul>
                    <li>默认的</li>
                    <li>用于设置默认值</li>
                    <li>例如，性别字段，默认为“男”，否则为“女”；若无指定该列的值，则默认值为“男”的值</li>
                </ul>
            </td>
        </tr>
    </table>
</body>
</html>

```sql
# 目标 : 创建一个school数据库
# 创建学生表(列,字段)
# 学号int 登录密码varchar(20) 姓名,性别varchar(2),出生日期(datatime),家庭住址,email
# 创建表之前 , 一定要先选择数据库

CREATE TABLE IF NOT EXISTS `student` (
	`id` INT(4) NOT NULL AUTO_INCREMENT COMMENT '学号',
	`name` VARCHAR(30) NOT NULL DEFAULT '匿名' COMMENT '姓名',
	`pwd` VARCHAR(20) NOT NULL DEFAULT '123456' COMMENT '密码',
	`sex` VARCHAR(2) NOT NULL DEFAULT '男' COMMENT '性别',
	`birthday` DATETIME DEFAULT NULL COMMENT '生日',
	`address` VARCHAR(100) DEFAULT NULL COMMENT '地址',
	`email` VARCHAR(50) DEFAULT NULL COMMENT '邮箱',
	PRIMARY KEY (`id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8

# 查看数据库的定义
SHOW CREATE DATABASE school;
# 查看数据表的定义
SHOW CREATE TABLE student;
# 显示表结构
DESC student;  # 设置严格检查模式(不能容错了)SET sql_mode='STRICT_TRANS_TABLES';
```

## 六、数据表的类型

### 6.1 设置数据表的类型：

```mysql
CREATE TABLE 表名(
   -- 省略一些代码
   -- Mysql注释
   -- 1. # 单行注释
   -- 2. /*...*/ 多行注释
)ENGINE = MyISAM (or InnoDB)

-- 查看mysql所支持的引擎类型 (表类型)
SHOW ENGINES;
```

`MySQL` 的数据表的类型 : **`MyISAM`** 、**`InnoDB`**、 `HEAP `、` BOB` 、`CSV`等。

![image-20220127135459932](https://s2.loli.net/2022/01/27/DThuPma5pK2Clq6.png)

常见的 `MyISAM` 与 `InnoDB` 类型：

| 功能       | MyISAM | InnoDB                |
| ---------- | ------ | --------------------- |
| 事务处理   | 不支持 | 支持                  |
| 数据行锁定 | 不支持 | 支持                  |
| 外键约束   | 不支持 | 支持                  |
| 全文索引   | 支持   | 不支持                |
| 表空间大小 | 较小   | 较大，约为前者的 2 倍 |

经验 ( 适用场合 )  :

- 适用 MyISAM : 节约空间及相应速度。
- 适用 InnoDB : 安全性 , 事务处理及多用户操作数据表。

### 6.2 数据表的存储位置

- `MySQL` 数据表以文件方式存放在磁盘中

  - 包括表文件，数据文件，以及数据库的选项文件。
  - 位置：如果是通过压缩包安装的，则在`Mysql`安装目录`\data\`下存放数据表；如果是通过安装程序安装的，则在`C:/ProgramData/MySQL/MySQL Server 5.5/Data/`下存放数据表。目录名对应数据库名 , 该目录下文件名对应数据表。

  ![image-20220127140614464](https://s2.loli.net/2022/01/27/byth9QrKCwVcl53.png)

  ![image-20220127140645951](https://s2.loli.net/2022/01/27/NXSW9bOyAxIB7sn.png)

- 注意 :

  - `*. frm`——表结构定义文件
  - `. MYD`——数据文件 ( data )
  - `* . MYI`——索引文件 ( index )
  - `InnoDB` 类型数据表只有一个 `*.frm` 文件 , 以及上一级目录的 `ibdata1` 文件
  - `MyISAM` 类型数据表对应三个文件 :

![image-20220127141135440](https://s2.loli.net/2022/01/27/8mKVDAIrPnjRS3F.png)

### 6.3 修改数据表

- 修改表名：`ALTER TABLE 旧表名 RENAME AS 新表名`
- 添加字段：`ALTER TABLE 表名 ADD字段名 列属性[属性]`
- 修改字段：
  - `ALTER TABLE 表名 MODIFY 字段名 列属性[属性]`
  - `ALTER TABLE 表名 CHANGE 旧字段名 新字段名 列属性[属性]`
- 删除字段：`ALTER TABLE 表名 DROP 字段名`

### 6.4 删除数据表

语法：`DROP TABLE [IF EXISTS] 表名`

- `IF EXISTS` 为可选，判断是否存在该数据表
- 如果删除不存在的数据表会抛出错误

### 6.5 其他

1. 每个库目录存在一个保存当前数据库的选项文件 `db.opt`
2. 模式通配符：
     - _   任意单个字符
     - %   任意多个字符，包括零字符
     -  单引号需要进行转义`\'`
3. `CMD` 命令行内的语句结束符可以为 `";", "\G", "\g"`，仅影响显示结果。其他地方还是用分号结束。`delimiter` 可修改当前对话的语句结束符
4. SQL对大小写不敏感（关键字）
5. 清除已有语句：`\c`

